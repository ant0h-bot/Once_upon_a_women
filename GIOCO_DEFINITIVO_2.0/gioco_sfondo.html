<!DOCTYPE html>
<html>
<head>
    <style>
        /* RESET GLOBALE: Rimuove spazi bianchi indesiderati ai bordi */
        * { margin: 0; padding: 0; box-sizing: border-box; }

        h1 { color: #ffffff; text-align: center; text-shadow: 0 0 3px #ff0000, 0 0 5px #ffffff; margin-top: 20px; }
        body { background-color: #800020; margin: 0; font-family: 'Segoe UI', Arial, sans-serif; overflow-x: hidden; }
        
        /* NAVIGAZIONE ADERENTE E MODERNA */
        nav {
            background-color: black;
            width: 100%;
            border-bottom: 2px solid gold;
        }

        nav ul { 
            list-style-type: none; 
            display: flex; 
            justify-content: center; 
        }

        nav ul li a { 
            display: block; 
            color: white; 
            text-align: center; 
            padding: 16px 25px; 
            text-decoration: none; 
            font-weight: bold;
            transition: all 0.3s ease;
        }

        /* EFFETTO HOVER ORO */
        nav ul li a:hover { 
            background-color: gold; 
            color: black; 
        }

        /* --- ANIMAZIONI --- */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes revealGlow {
            0% { transform: translateY(10px); opacity: 0; filter: blur(5px); }
            100% { transform: translateY(0); opacity: 1; filter: blur(0px); text-shadow: 0 0 5px currentColor; }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20% { transform: translateX(-10px); }
            40% { transform: translateX(10px); }
            60% { transform: translateX(-10px); }
            80% { transform: translateX(10px); }
        }

        .quiz-section {
            background-color: rgba(0,0,0,0.85);
            color: white; padding: 20px; text-align: center;
            margin: 20px auto; width: 90%; max-width: 900px;
            border-radius: 12px; border: 3px solid gold;
            transition: all 0.3s ease;
        }

        .shake-effect { animation: shake 0.4s ease-in-out; border-color: #ff4757 !important; }

        #feedback { 
            font-size: 1.6em; margin: 15px 0; min-height: 1.6em; 
            display: inline-block;
            font-weight: bold;
        }

        .first-run-animation { 
            animation: revealGlow 1.2s cubic-bezier(0.22, 1, 0.36, 1) forwards; 
        }

        /* --- LAYOUT GRIGLIA --- */
        .table-container { 
            display: none; 
            width: 95%; max-width: 1100px; margin: 20px auto; padding: 20px; 
            background-color: rgba(255,255,255,0.05); border-radius: 15px; 
        }

        .fade-in-active {
            display: block !important;
            animation: fadeIn 0.8s ease-out forwards;
        }

        .grid-overlay { display: flex; flex-wrap: wrap; justify-content: center; gap: 12px; min-height: 200px; }

        .card-container { perspective: 1000px; height: 150px; width: 115px; cursor: pointer; transition: transform 0.2s; }
        .card-container:hover { transform: scale(1.08); z-index: 10; }
        
        .card-inner { position: relative; width: 100%; height: 100%; transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1); transform-style: preserve-3d; }
        .card-container.excluded .card-inner { transform: rotateY(180deg); }

        .card-front, .card-back { 
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
            backface-visibility: hidden; border: 2px solid white; border-radius: 6px; 
            overflow: hidden; box-sizing: border-box; 
        }
        
        .card-front img { width: 100%; height: 100%; object-fit: cover; display: block; }
        .card-back { 
            background: linear-gradient(135deg, #444, #111); color: #f1c40f; 
            display: flex; align-items: center; justify-content: center; 
            transform: rotateY(180deg); font-size: 13px; font-weight: bold; 
            padding: 10px; text-align: center; text-transform: uppercase;
        }

        .button { background-color: #e74c3c; border: none; color: white; padding: 10px 18px; cursor: pointer; border-radius: 5px; font-weight: bold; transition: 0.2s; }
        .button:hover { background-color: #c0392b; transform: translateY(-2px); }
        .button-win { background-color: #27ae60; }
        
        select, input { padding: 10px; border-radius: 5px; border: 1px solid #ccc; width: 200px; outline: none; }
        .stats-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; border-bottom: 1px solid #555; padding-bottom: 10px; }
        #timer-display { font-size: 22px; color: #f1c40f; font-weight: bold; }
        .controls-wrapper { display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; margin-bottom: 20px; }
        .select-group { display: flex; flex-direction: column; gap: 5px; }

        @media (max-width: 600px) { .card-container { height: 110px; width: 85px; } }
    </style>
</head>
<body>

    <nav>
        <ul>
            <li><a href="regole_gioco.html">Come si gioca?</a></li>
            <li><a href="Ideatori_gioco.html">Ideatori</a></li>
        </ul>
    </nav>

    <h1>Once upon a girl....</h1>
    
    <div id="quiz-box" class="quiz-section">
        <div class="stats-bar">
            <div id="timer-display">Tempo: 00:00</div>
            <div>Domande fatte: <span id="count-domande" style="color:gold">0</span></div>
        </div>
        
        <div class="controls-wrapper">
            <div class="select-group">
                <select id="select-nazionalita"><option>Nazionalità...</option></select>
                <button class="button" onclick="chiedi('nazionalita', 'select-nazionalita')">Fai la domanda</button>
            </div>
            <div class="select-group">
                <select id="select-epoca"><option>Epoca...</option></select>
                <button class="button" onclick="chiedi('epoca', 'select-epoca')">Fai la domanda</button>
            </div>
            <div class="select-group">
                <select id="select-vocazione"><option>Campo d'azione...</option></select>
                <button class="button" onclick="chiedi('vocazione', 'select-vocazione')">Fai la domanda</button>
            </div>
        </div>

        <div id="feedback" class="first-run-animation">Premi "NUOVA PARTITA" per iniziare!</div>

        <div style="margin-top: 20px; border-top: 1px solid #444; padding-top: 20px;">
            <input type="text" id="input-indovino" placeholder="Scrivi il nome...">
            <button class="button button-win" onclick="tentaIndovino()">INDOVINA!</button>
        </div>
    </div>

    <div class="table-container" id="table-wrap">
        <div id="board" class="grid-overlay"></div>
    </div>

    <div style="text-align:center; padding-bottom: 50px;">
        <button class="button" style="background-color: gold; color: black; font-size: 22px; padding: 15px 50px; border: 2px solid white;" onclick="resetGioco()">NUOVA PARTITA</button>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <script>
        const personaggi = [
            { nome: "Serena Williams", img: "Williams.jpg", nazionalita: "Americana", epoca: "Contemporanea", vocazione: "Sport" },
            { nome: "Cleopatra", img: "Cleopatra.jpg", nazionalita: "Altro", epoca: "Antica", vocazione: "Politica" },
            { nome: "Bebe Vio", img: "Vio.jpg", nazionalita: "Italiana", epoca: "Contemporanea", vocazione: "Sport" },
            { nome: "Elisabetta I", img: "Elisabetta.jpg", nazionalita: "Inglese", epoca: "Antica", vocazione: "Politica" },
            { nome: "Frida Kahlo", img: "Khalo.jpg", nazionalita: "Altro", epoca: "Contemporanea", vocazione: "Arte" },
            { nome: "Saffo", img: "Saffo.jpg", nazionalita: "Altro", epoca: "Antica", vocazione: "Letteratura" },
            { nome: "Agatha Christie", img: "Christie.jpg", nazionalita: "Inglese", epoca: "Contemporanea", vocazione: "Letteratura" },
            { nome: "J.K. Rowling", img: "Rowling.jpg", nazionalita: "Inglese", epoca: "Contemporanea", vocazione: "Letteratura" },
            { nome: "Samantha Cristoforetti", img: "Cristoforetti.jpg", nazionalita: "Italiana", epoca: "Contemporanea", vocazione: "Scienza" },
            { nome: "Sofia Loren", img: "Loren.jpg", nazionalita: "Italiana", epoca: "Contemporanea", vocazione: "Arte" },
            { nome: "Billie Jean King", img: "King.jpg", nazionalita: "Americana", epoca: "Contemporanea", vocazione: "Sport" },
            { nome: "Katherine Johnson", img: "jhonson.jpg", nazionalita: "Americana", epoca: "Contemporanea", vocazione: "Scienza" },
            { nome: "Coco Chanel", img: "Chanel.jpg", nazionalita: "Francese", epoca: "Contemporanea", vocazione: "Arte" },
            { nome: "Jane Austen", img: "Austen.jpg", nazionalita: "Inglese", epoca: "Antica", vocazione: "Letteratura" },
            { nome: "Margaret Thatcher", img: "Thatcher.jpg", nazionalita: "Inglese", epoca: "Contemporanea", vocazione: "Politica" },
            { nome: "Margherita Hack", img: "Hack.jpg", nazionalita: "Italiana", epoca: "Contemporanea", vocazione: "Scienza" },
            { nome: "Marie Curie", img: "Curie.jpg", nazionalita: "Francese", epoca: "Contemporanea", vocazione: "Scienza" },
            { nome: "Rita Levi Montalcini", img: "Montalcini.jpg", nazionalita: "Italiana", epoca: "Contemporanea", vocazione: "Scienza" },
            { nome: "Simone Biles", img: "Biles.jpg", nazionalita: "Americana", epoca: "Contemporanea", vocazione: "Sport" },
            { nome: "Emily Brontë", img: "Bronte.jpg", nazionalita: "Inglese", epoca: "Antica", vocazione: "Letteratura" },
            { nome: "Artemisia Gentileschi", img: "Gentileschi.jpg", nazionalita: "Italiana", epoca: "Antica", vocazione: "Arte" },
            { nome: "Virginia Woolf", img: "Woolf.jpg", nazionalita: "Inglese", epoca: "Contemporanea", vocazione: "Letteratura" },
            { nome: "Serafina Battaglia", img: "Battaglia.jpg", nazionalita: "Italiana", epoca: "Contemporanea", vocazione: "Politica" },
            { nome: "Maria Montessori", img: "Montessori.jpg", nazionalita: "Italiana", epoca: "Contemporanea", vocazione: "Scienza" }
        ];

        let personaggioSegreto;
        let secondi = 0;
        let timer;
        let contatoreDomande = 0;

        function aggiornaTimer() {
            const m = Math.floor(secondi / 60).toString().padStart(2, '0');
            const s = (secondi % 60).toString().padStart(2, '0');
            document.getElementById('timer-display').innerText = `Tempo: ${m}:${s}`;
        }

        function mostraFeedback(testo, colore) {
            const f = document.getElementById('feedback');
            f.innerText = testo;
            f.style.color = colore;
        }

        function popolaSelect(id, opt, placeholder) {
            const s = document.getElementById(id);
            s.innerHTML = `<option value="" disabled selected>${placeholder}</option>`;
            opt.forEach(o => {
                const option = document.createElement('option');
                option.value = o.v;
                option.textContent = o.t;
                s.appendChild(option);
            });
        }

        function resetGioco() {
            const wrap = document.getElementById('table-wrap');
            wrap.classList.add('fade-in-active');

            const board = document.getElementById('board');
            board.innerHTML = '';
            
            contatoreDomande = 0;
            document.getElementById('count-domande').innerText = "0";
            document.getElementById('input-indovino').value = "";
            mostraFeedback("Indovina la donna misteriosa!", "white");
            
            popolaSelect('select-nazionalita', [
                {v: "Italiana", t: "È Italiana?"}, {v: "Americana", t: "È Americana?"},
                {v: "Inglese", t: "È Inglese?"}, {v: "Francese", t: "È Francese?"}, {v: "Altro", t: "È di un'altra nazionalità?"}
            ], "Nazionalità");

            popolaSelect('select-epoca', [
                {v: "Antica", t: "Viene dal passato?"}, {v: "Contemporanea", t: "È dei nostri giorni?"}
            ], "Epoca");

            popolaSelect('select-vocazione', [
                {v: "Scienza", t: "Scienziata?"}, {v: "Arte", t: "Artista?"},
                {v: "Letteratura", t: "Scrittrice?"}, {v: "Sport", t: "Sportiva?"}, {v: "Politica", t: "Politica?"}
            ], "Campo");

            personaggioSegreto = personaggi[Math.floor(Math.random() * personaggi.length)];
            
            personaggi.forEach(p => {
                const container = document.createElement('div');
                container.className = 'card-container';
                container.innerHTML = `
                    <div class="card-inner">
                        <div class="card-front"><img src="${p.img}" alt="${p.nome}" onerror="this.src='https://via.placeholder.com/150x200?text=Profilo'"></div>
                        <div class="card-back"><span>${p.nome}</span></div>
                    </div>`;
                container.onclick = () => container.classList.toggle('excluded');
                board.appendChild(container);
            });

            clearInterval(timer);
            secondi = 0;
            aggiornaTimer();
            timer = setInterval(() => { secondi++; aggiornaTimer(); }, 1000);
        }

        function chiedi(categoria, idSelect) {
            const sel = document.getElementById(idSelect);
            if (!sel.value || !personaggioSegreto) return;
            contatoreDomande++;
            document.getElementById('count-domande').innerText = contatoreDomande;
            const esito = (personaggioSegreto[categoria] === sel.value);
            mostraFeedback(esito ? "SÌ!" : "NO...", esito ? "#2ecc71" : "#ff4757");
        }

        function tentaIndovino() {
            const box = document.getElementById('quiz-box');
            const input = document.getElementById('input-indovino').value.trim().toLowerCase();
            
            if (input === personaggioSegreto.nome.toLowerCase()) {
                clearInterval(timer);
                mostraFeedback("VITTORIA! È " + personaggioSegreto.nome.toUpperCase() + "!", "gold");
                confetti({ particleCount: 200, spread: 90, origin: { y: 0.6 } });
            } else {
                mostraFeedback("Sbagliato! Ritenta.", "#e74c3c");
                box.classList.add('shake-effect');
                setTimeout(() => box.classList.remove('shake-effect'), 400);
            }
        }
    </script>
</body>
</html>